openapi: "3.0.1"

info:
  title: "{{ config('app.name') }} API Specification"
  description: "For using the {{ config('app.name') }} API"
  version: "v1"
  contact:
    name: "Ayup Digital"
    url: "https://ayup.agency"

servers:
- url: "{{ config('app.url') }}/v1/"
  description: "Dev Server"

paths:
  # User Routes.
  /users:
    $ref: "/docs/paths/users.yaml#/users"
  /users/{user_id}:
    $ref: "/docs/paths/users.yaml#/users.user_id"
  /clinics/{clinic_id}/users:
    $ref: "/docs/paths/users.yaml#/clinics.clinic_id.users"

  # Service User Routes.
  /service-users:
    $ref: "/docs/paths/service-users.yaml#/service-users"
  /service-users/{service_user_uuid}:
    $ref: "/docs/paths/service-users.yaml#/service-users.service_user_uuid"

  # Clinic Routes.
  /clinics:
    $ref: "/docs/paths/clinics.yaml#/clinics"
  /clinics/{clinic_id}:
    $ref: "/docs/paths/clinics.yaml#/clinics.clinic_id"

  # Appointment Routes.
  /appointments:
    $ref: "/docs/paths/appointments.yaml#/appointments"
  /appointments/{appointment_id}:
    $ref: "/docs/paths/appointments.yaml#/appointments.appointment_id"
  /appointments/{appointment_id}/cancel:
    $ref: "/docs/paths/appointments.yaml#/appointments.appointment_id.cancel"
  /clinics/{clinic_id}/appointments:
    $ref: "/docs/paths/appointments.yaml#/clinics.clinic_id.appointments"
  /users/{user_id}/appointments:
    $ref: "/docs/paths/appointments.yaml#/users.user_id.appointments"
  /service-users/{service_user_uuid}/appointments:
    $ref: "/docs/paths/appointments.yaml#/service-users.service_user_uuid.appointments"

  # Question Routes.
  /questions:
    $ref: "/docs/paths/questions.yaml#/questions"

  # Eligible Answer Routes.
  /clinics/{clinic_id}/eligible-answers:
    $ref: "/docs/paths/eligible-answers.yaml#/clinics.clinic_id.eligible-answers"

  # Booking Routes.
  /booking/eligibility:
    $ref: "/docs/paths/bookings.yaml#/bookings.eligibility"
  /appointments/{appointment_id}/bookings:
    $ref: "/docs/paths/bookings.yaml#/appointments.appointment_id.bookings"

  # Calendar Feed Token.
  /users/{user_id}/calendar-feed-token:
    $ref: "/docs/paths/calendar-feed-token.yaml#/users.user_id.calendar-feed-token"

components:
  securitySchemes:
    app_id:
      type: "apiKey"
      description: "API key to authorize requests"
      name: "appid"
      in: "query"

security:
  - app_id: []

tags:
  - name: "Users"
    description: "Backend users"
  - name: "Service Users"
    description: "End-users consuming the service"
  - name: "Clinics"
    description: "Clinic locations"
  - name: "Appointments"
    description: "Appointments at clinics"
  - name: "Questions"
    description: "To check eligibility at clinics for service users"
  - name: "Eligible Answers"
    description: "Set by clinics to specify which answers make the user eligible"
  - name: "Bookings"
    description: "For service users to make appointment bookings"
  - name: "Calendar Feed Token"
    description: "For managing the users calendar feed token"

externalDocs:
  description: "External Doc Website"
  url: "https://ayup.agency"
