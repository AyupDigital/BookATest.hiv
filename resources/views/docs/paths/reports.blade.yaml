users.user_id.reports:
  post:
    tags:
      - "Reports"
    summary: "Create a new report for the specified user"
    description: |
      **Permission:** `Community Worker`
      - Create reports for themself
    operationId: "users.reports.store"
    parameters:
      - $ref: "/docs/parameters/id.yaml#/user_id"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "/docs/schemas/report.yaml#/CreateReport"
    responses:
      200:
        description: "Successful response"
        content:
          application/json:
            schema:
              $ref: "/docs/schemas/report.yaml#/ReportCollection"
      404:
        $ref: "/docs/schemas/responses.yaml#/NotFoundResponse"
      401:
        $ref: "/docs/schemas/responses.yaml#/UnauthenticatedResponse"
      419:
        $ref: "/docs/schemas/responses.yaml#/AuthenticationTimeoutResponse"
  get:
    tags:
      - "Reports"
    summary: "List all the reports for a specific user"
    description: |
      **Permission:** `Community Worker`
      - List their own reports
    operationId: "users.reports.index"
    parameters:
      - $ref: "/docs/parameters/id.yaml#/user_id"
    responses:
      200:
        description: "Successful response"
        content:
          application/json:
            schema:
              $ref: "/docs/schemas/report.yaml#/ReportCollection"
      404:
        $ref: "/docs/schemas/responses.yaml#/NotFoundResponse"
      401:
        $ref: "/docs/schemas/responses.yaml#/UnauthenticatedResponse"
      419:
        $ref: "/docs/schemas/responses.yaml#/AuthenticationTimeoutResponse"

reports.report_id:
  get:
    tags:
      - "Reports"
    summary: "Show the specified report"
    description: |
      **Permission:** `Community Worker`
      - Show their own reports
    operationId: "reports.show"
    parameters:
      - $ref: "/docs/parameters/id.yaml#/report_id"
    responses:
      200:
        description: "Successful response"
        content:
          application/json:
            schema:
              $ref: "/docs/schemas/report.yaml#/Report"
      404:
        $ref: "/docs/schemas/responses.yaml#/NotFoundResponse"
      401:
        $ref: "/docs/schemas/responses.yaml#/UnauthenticatedResponse"
      419:
        $ref: "/docs/schemas/responses.yaml#/AuthenticationTimeoutResponse"
  delete:
    tags:
      - "Reports"
    summary: "Delete a specific report"
    description: |
      **Permission:** `Community Worker`
      - Delete their own reports
    operationId: "reports.destroy"
    parameters:
      - $ref: "/docs/parameters/id.yaml#/report_id"
    responses:
      200:
        description: "Successful response"
        content:
          application/json:
            schema:
              $ref: "/docs/schemas/responses.yaml#/DeletedResponse"
      404:
        $ref: "/docs/schemas/responses.yaml#/NotFoundResponse"
      401:
        $ref: "/docs/schemas/responses.yaml#/UnauthenticatedResponse"
      419:
        $ref: "/docs/schemas/responses.yaml#/AuthenticationTimeoutResponse"

reports.report_id.download:
  get:
    tags:
      - "Reports"
    summary: "Download the specified report"
    description: |
      **Permission:** `Community Worker`
      - Download their own reports
    operationId: "reports.download"
    parameters:
      - $ref: "/docs/parameters/id.yaml#/report_id"
    responses:
      200:
        description: "Successful response"
        content:
          application/pdf:
      404:
        $ref: "/docs/schemas/responses.yaml#/NotFoundResponse"
      401:
        $ref: "/docs/schemas/responses.yaml#/UnauthenticatedResponse"
      419:
        $ref: "/docs/schemas/responses.yaml#/AuthenticationTimeoutResponse"
